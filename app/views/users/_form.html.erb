<%= javascript_include_tag "user-password-fields" %>


<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<span><i>Required fields are marked with a *</i></span>
  <div class="field">
    <%= f.label :username %><%= mark_required(@user, :username) %><br />
    <%= f.text_field :username %>
  </div>
  <div class="field" id="user_pw_field">
  	<div id="user_pw_btn" class="btn btn-info">Change Password</div>
  </div>
  <div id="user_pw">
	  <div class="field">
	    <%= f.label :new_password %><i>(leave blank if you don't want to change it)</i><br />
	    <%= f.password_field :password, :autocomplete => "off" %>
	  </div>
	
	  <div class="field">
	    <%= f.label :password_confirmation %><br />
	    <%= f.password_field :password_confirmation %>
	  </div>
  </div>
  <div class="field">
  	<%= f.label :email %><%= mark_required(@user, :email) %><br />
  	<%= f.email_field :email %>
  </div>
  <div class="field">
    <%= f.label :first_name %><%= mark_required(@user, :first_name) %><br />
    <%= f.text_field :first_name %>
  </div>
  <div class="field">
  	 <%= f.label :middle_names %><%= mark_required(@user, :middle_names) %><br />
  	 <%= f.text_field :middle_names %> 
  </div>
  <div class="field">
  	<%= f.label :last_name %><%= mark_required(@user, :last_name) %><br />
  	<%= f.text_field :last_name %>
  </div>
  <div class="field">
    <%= f.label :date_of_birth %><%= mark_required(@user, :date_of_birth) %><br />
    <%= f.date_select :date_of_birth, :order => [:day, :month, :year], start_year: 1900, end_year: Time.now.year - 17, default: 40.years.ago %>
  </div>
  <div class="field">
    <%= f.label :gender %><%= mark_required(@user, :gender) %><br />
    <%= f.select :gender, ["", "Male", "Female"] %>
  </div>
  <div class="field">
    <%= f.label :first_line_of_address %><%= mark_required(@user, :line_1) %><br />
    <%= f.text_field :line_1 %>
  </div>
  <div class="field">
    <%= f.label :second_line_of_address %><%= mark_required(@user, :line_2) %><br />
    <%= f.text_field :line_2 %>
  </div>
  <div class="field">
    <%= f.label :third_line_of_address %><%= mark_required(@user, :line_3) %><br />
    <%= f.text_field :line_3 %>
  </div>
  <div class="field">
    <%= f.label :town %><%= mark_required(@user, :town) %><br />
    <%= f.text_field :town %>
  </div>
  <div class="field">
    <%= f.label :county %><%= mark_required(@user, :county) %><br />
    <%= f.collection_select :county, COUNTIES, :to_s, :titleize, {:prompt => true} %>
  </div>
  <div class="field">
    <%= f.label :postcode %><%= mark_required(@user, :postcode) %><br />
    <%= f.text_field :postcode %>
  </div>
  <div class="field">
    <%= f.label :contact_number %><%= mark_required(@user, :contact_number) %><br />
    <%= f.text_field :contact_number %>
  </div>
  <div class="actions field">
    <%= f.submit 'Update', :class => "btn btn-success" %>
  </div>
<% end %>
